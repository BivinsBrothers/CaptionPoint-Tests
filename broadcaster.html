<!doctype html>
<html>
  <head>
    <title>Broadcast Page</title>
    <link rel="stylesheet" type="text/css" href="css/style.css">
  </head>
  <body>
    <textarea id="source">

    </textarea>


    <script src="https://code.jquery.com/jquery-1.11.1.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="js/remark.js"></script>
    <script>
      $(document).ready(function() {
        function getSlideNumber(slide) {
          slideElement = slide.getSlideIndex() + 1;
          return slideElement;
        }

        var socket = io();

        // This fires before remark captures keystroke
        $("body").keydown(function(event) {
          var currentSlideNumber = Number.parseInt(window.location.href.split('#')[1]);
          var newSlideNumber = 0;
          console.log("We are on slide " + currentSlideNumber);

          if (event.which == 39 || event.which == 32 || event.which == 38) {
            newSlideNumber = currentSlideNumber + 1;
            socket.emit('redirect', newSlideNumber);
            console.log("We are redirecting to slide " + newSlideNumber);
          }
          // if (event.which == 37 || event.which == 40) {
          //   socket.emit('previous', "We are on slide " + slideNumber);
          //   console.log("We are on slide " + slideNumber);
          // }
          if (event.which == 37 || event.which == 40) {
            newSlideNumber = currentSlideNumber - 1;
            socket.emit('redirect', newSlideNumber);
            console.log("We are redirecting to slide " + newSlideNumber);
          }
        });

      });
    </script>

    <script>
      var slideshow = remark.create({
        sourceUrl: 'beauty.md',
        ratio: '16:9',
        navigation: {
          scroll: false,
        },
      });
    </script>
  </body>
</html>
